(()=>{"use strict";const e=window.wp.plugins,a=window.wp.element,t=window.wp.editPost,n=window.wp.components,l=window.wp.data;function o(e){let t,{keyword:[n,l,o],matches:r}=e;return t=0===r||r>o?"red":r>=l?"green":"orange",(0,a.createElement)("div",{className:`keyword-pill keyword-pill-${t}`},(0,a.createElement)("span",null,n),(0,a.createElement)("div",null,(0,a.createElement)("span",null,r," / ",l==o?l:`${l}-${o}`)))}function r(e){return(0,a.createElement)(n.Button,e)}function i(e){return e.multiline?(0,a.createElement)(n.TextareaControl,e):(0,a.createElement)(n.TextControl,e)}function s(e){let{icon:t,style:n={}}=e;return(0,a.createElement)("span",{className:`mdi mdi-${t}`,style:n})}function c(e){return(0,a.createElement)(n.SelectControl,e)}const m=wp.ajax,g=window.wp.blocks,d={"a+":{bg:"#bfeab2",fg:"#1e8200"},b:{bg:"#fff3cc",fg:"#ffc400"},a:{bg:"#e9f8e5",fg:"#56c732"},c:{bg:"#fff6e5",fg:"#ff8800"},d:{bg:"#ffe5e5",fg:"#ff0000"},"n/a":{bg:"#dedede",fg:"#616161"}};function u(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.replaceAll(/<!--.*?-->/g,"");if(t=t.replaceAll(/\n+/g,"\n"),a){const e=document.createElement("div");e.innerHTML=t,t=e.textContent||e.innerText||""}return t}const f=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"snackbar",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,l.dispatch)("core/notices").createNotice(a,e,{type:t,isDismissible:n,actions:o})};function p(e){return e>=8?"A+":e>=6?"A":e>=4?"B":e>=2.5?"C":"D"}function h(e){let a=e;return"number"==typeof e&&(a=p(e)),d[a.toLowerCase()]||d["n/a"]}function b(e){const a=h(e);return{backgroundColor:a.bg,color:a.fg}}function E(e){return{improvement:e.scores&&e?.scores<4,opportunity:e.competitor&&e?.competitor?.scores<4}}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const[t,n]=(0,a.useState)(!1),l=a=>{navigator.clipboard.writeText(a).then((()=>{n(!0),setTimeout((()=>{n(!1)}),e)})).catch((e=>{console.error("Failed to copy text: ",e)}))};return{isCopied:t,copy:l}}function _(e){let a,t=(0,l.select)("core/block-editor").getSelectionEnd();a=t.clientId?t.clientId:(0,l.select)("core/block-editor").getBlocks().at(-1).clientId;const n=(0,l.select)("core/block-editor").getBlockIndex(a),o=(0,g.createBlock)("core/paragraph",{content:e});return(0,l.dispatch)("core/block-editor").insertBlock(o,n+1),o}function y(e){return(0,l.dispatch)("core/editor").editPost({meta:e}).then((()=>{(0,l.dispatch)("core/editor").savePost()}))}function k(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"<strong>[Generating text here...]</strong>";const t=(0,l.select)("core/block-editor").getSelectedBlockClientIds(),n=(0,l.select)("core/block-editor").getSelectionStart(),o=(0,l.select)("core/block-editor").getSelectionEnd();if(void 0===n.clientId){const t=(0,l.select)("core/block-editor").getBlocks().at(-1),n=(0,l.select)("core/block-editor").getBlockIndex(t.clientId);let o;return e&&(o=(0,g.createBlock)("core/paragraph",{content:a}),(0,l.dispatch)("core/block-editor").insertBlock(o,n+1)),{start:t,end:t,text:S(t.attributes.content),newBlock:o}}if(n.clientId===o.clientId&&n.offset===o.offset){const t=(0,l.select)("core/block-editor").getBlock(n.clientId);let r;if(e){r=(0,g.createBlock)("core/paragraph",{content:a});const e=(0,l.select)("core/block-editor").getBlockIndex(n.clientId);(0,l.dispatch)("core/block-editor").insertBlock(r,e+1)}return{text:t.attributes[o.attributeKey],end:t,start:t,newBlock:r}}let r="";t.forEach((e=>{const a=(0,l.select)("core/block-editor").getBlock(e);let t;a.attributes.content&&(t=S(a.attributes.content)),e===o.clientId&&(t=t.slice(0,o.offset)),e===n.clientId?(t=t.slice(n.offset),r+=t):r+="\n"+t}));const i=(0,l.select)("core/block-editor").getBlockIndex(o.clientId);let s;return e&&(s=(0,g.createBlock)("core/paragraph",{content:a}),(0,l.dispatch)("core/block-editor").insertBlock(s,i+1)),{text:r,end:(0,l.select)("core/block-editor").getBlock(o.clientId),start:(0,l.select)("core/block-editor").getBlock(n.clientId),newBlock:s}}function w(e,a){for(var t=arguments.length,n=new Array(t>2?t-2:0),o=2;o<t;o++)n[o-2]=arguments[o];return function(t){var o,r,i,s;let{status_code:c,...m}=t;if(!c||200===c)return e(m,...n);let g="";switch(c){case 400:case 429:g=null!==(o=null!==(r=null!==(i=null!==(s=m.message)&&void 0!==s?s:m.detail)&&void 0!==i?i:m?.data.message)&&void 0!==r?r:m.data?.detail)&&void 0!==o?o:"Something went wrong";break;case 401:g="You're not authorized to use the plugin. Upgrade your plan to use this plugin.";break;case 500:g="It seems you have succeeded in burning our servers.<br/>Please wait for a few seconds as we cool down"}g&&(0,l.dispatch)("longshot-ai").add_notification(g).then((e=>{let{payload:{id:a}}=e;setTimeout((()=>{(0,l.dispatch)("longshot-ai").delete_notification(a)}),5e3)})),a&&a(m,...n)}}function S(e){const a=document.createElement("p");a.innerHTML=e.replace(/<br>/g,"<br>\n");const t=a.innerText;return a.remove(),t}function C(e){return e.replace(/\n/g,"<br>")}function N(){const e=(0,l.select)("longshot-ai").getData("write_more");return function(e,a){if(e=u(e,!0),a=u(a,!0),Math.abs(e.length-a.length)>=100)return Math.abs(e.length-a.length);let t=e.length,n=a.length,l=new Array(2);for(let e=0;e<2;e++){l[e]=new Array(t+1);for(let a=0;a<t+1;a++)l[e][a]=0}for(let e=0;e<=t;e++)l[0][e]=e;for(let o=1;o<=n;o++)for(let n=0;n<=t;n++)0==n?l[o%2][n]=o:e[n-1]==a[o-1]?l[o%2][n]=l[(o-1)%2][n-1]:l[o%2][n]=1+Math.min(l[(o-1)%2][n],Math.min(l[o%2][n-1],l[(o-1)%2][n-1]));return l[n%2][t]}((0,l.select)("core/editor").getEditedPostContent(),e.last_content)<=100?(0,l.dispatch)("longshot-ai").update_data({subsequent_runs:e.subsequent_runs+1},"write_more"):(0,l.dispatch)("longshot-ai").update_data({...e,subsequent_runs:0},"write_more"),e.subsequent_runs>=3}function P(e,a,t){(0,l.dispatch)("longshot-ai").update_generators_data(e,a,t)}function D(){if((0,l.select)("longshot-ai").getPostData("topic"))return(0,l.dispatch)("longshot-ai").update_seo_data({isLoading:!0}),m.post("longshot_ai_get_all_seo_data",(0,l.select)("longshot-ai").getPostData()).done((e=>{(0,l.dispatch)("longshot-ai").update_seo_data({...e,isLoading:!1,error:null})})).fail((e=>{console.log(e),f("Error fetching SEO data","error"),(0,l.dispatch)("longshot-ai").update_seo_data({isLoading:!1,error:e.message})}))}function L(e){let a,t,n;switch(e){case"serp":if(a="longshot_ai_get_serp_scores",t=(0,l.select)("longshot-ai").getPostData(),n="serp_score",!t.topic)return;break;case"semantic":if(a="longshot_ai_get_semantic_scores",t={...(0,l.select)("longshot-ai").getPostData(),text:u((0,l.select)("core/editor").getEditedPostContent(),!0)},!t.text||!t.topic)return;n="semantic_score";break;default:return}return function(e,a,t){const n=e=>{var a;console.log(e),f(`Error fetching ${t}`,e),(0,l.dispatch)("longshot-ai").update_data({isLoading:!1,error:null!==(a=e.message)&&void 0!==a?a:`Error fetching ${t}`},t)};return(0,l.dispatch)("longshot-ai").update_data({isLoading:!0,error:null},t),m.post(e,a).done(w((e=>{let{scores:a}=e;(0,l.dispatch)("longshot-ai").update_data({scores:a,isLoading:!1,error:null},t),function(){const{serp_score:e,semantic_score:a}=(0,l.select)("longshot-ai").getData();e.isLoading||a.isLoading||e.error||a.error||e.scores?.length&&a.scores?.length&&(e.scores.forEach((e=>{e.forEach(((e,t)=>{const n=a.scores[0][t].competitor;(!n||n.scores<e.scores)&&(a.scores[0][t].competitor=e)}))})),(0,l.dispatch)("longshot-ai").update_data(a,"semantic_score"))}()}),n)).fail(w(n,n))}(a,t,n)}function T(e){let{Icon:t=n.Spinner,showLoader:l=!0,unit:o="s",timeout:r=null,text:i="Loading..."}=e;return(0,a.createElement)("div",{className:"lsai_loader_wrapper loading"},l&&(0,a.createElement)("div",{className:"loading__icon"},(0,a.createElement)(t,null)),(0,a.createElement)("p",{className:"loading__text"},i),r&&(0,a.createElement)("p",{className:"loading__timeout"},"This may take around ",r,o))}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},A.apply(this,arguments)}const I=e=>{let{children:t,style:n={},isRound:l=!0}=e;return(0,a.createElement)("div",{className:"score-box "+(l?"round":""),style:n},t)};function x(e){const a=h(e);return{backgroundColor:a.bg,color:a.fg}}const B=function(e){var t,l,o;let{scores:r,competitor:i,index:s,query:c}=e;const m=p(r),g=p(null!==(t=i?.scores)&&void 0!==t?t:0);return(0,a.createElement)("article",{className:"top-rated-card"},(0,a.createElement)("div",{className:"left-content"},(0,a.createElement)("h4",null,"#",s,"   ",c),(0,a.createElement)("p",null,null!==(l=i?.passage[1])&&void 0!==l?l:""),(0,a.createElement)(n.ExternalLink,{href:null!==(o=i?.url)&&void 0!==o?o:""},i?.url),(0,a.createElement)("div",{className:"copy-container"},(0,a.createElement)("span",null,"Copy: "),(0,a.createElement)(n.Button,{variant:"secondary",id:s+"1",isSmall:!0,onClick:M(i?.passage[0],s+"1")},"Heading"),(0,a.createElement)(n.Button,{variant:"secondary",id:s+"2",isSmall:!0,onClick:M(i?.passage[1],s+"2")},"Paragraph"))),(0,a.createElement)("div",{className:"score-container"},i?(0,a.createElement)(I,{style:x(g)},g):(0,a.createElement)(n.Spinner,null)),(0,a.createElement)("div",{className:"score-container"},(0,a.createElement)(I,{style:x(m)},m)))};function M(e,a){const{copy:t}=v(0);return function(){t(e);const n=document.getElementById(a),l=n.innerHTML;n?.classList.add("copied"),n.innerHTML="Copied",setTimeout((()=>{n?.classList.remove("copied"),n.innerHTML=l}),1e3)}}const G=[{name:"top-rated",title:"Top Rated",Component:function(){const e=(0,l.useSelect)((e=>e("longshot-ai").getData("semantic_score")));return(0,a.createElement)("section",{className:"top_rated_table"},(0,a.createElement)("div",{className:"table-heading"},(0,a.createElement)("div",{className:"left-content"}),(0,a.createElement)("div",{className:"score-container"},"Competitor Score"),(0,a.createElement)("div",{className:"score-container"},"Your Score")),e.scores[0].map(((e,t)=>(0,a.createElement)(B,A({key:t,index:t+1},e)))))},icon:""},{name:"competitors",title:"All Competitors",Component:function(){const e=(0,l.useSelect)((e=>e("longshot-ai").getData("serp_score"))),t=(0,l.useSelect)((e=>e("longshot-ai").getData("semantic_score")));return t.scores.length&&e.scores.length?(0,a.createElement)("section",{className:"competitors-container"},t.scores[0].map(((t,l)=>{const o=t.scores;return(0,a.createElement)("article",{key:l},(0,a.createElement)("div",{className:"heading"},(0,a.createElement)("h3",null,(0,a.createElement)("span",null,"#",l+1,"   ",t.query)),(0,a.createElement)(I,{style:b(o)},(0,a.createElement)(n.Tooltip,{text:"Your Score"},(0,a.createElement)("span",null,p(o))))),e&&e.scores.map(((e,t)=>{const o=e[l].scores;return(0,a.createElement)("article",{key:t},(0,a.createElement)("div",null,(0,a.createElement)("h4",null,e[l]?.headline),(0,a.createElement)(n.ExternalLink,{href:e[l]?.url},e[l]?.url)),(0,a.createElement)(I,{style:b(o)},p(o)))}))||(0,a.createElement)(T,{showLoader:!1}))}))):(0,a.createElement)(T,{text:"Please wait while we fetch semantic score for your post..."})},icon:""}];function q(){const e=(0,l.useSelect)((e=>e("longshot-ai").getData("semantic_score")));let t=0;return e&&e.scores&&(t=e.scores[0].reduce(((e,a)=>e+a.scores),0)/e.scores[0].length),(0,a.createElement)("section",null,(0,a.createElement)("div",{className:"heading"},(0,a.createElement)("span",null,"Your aggregate score"," ",(0,a.createElement)(I,{style:b(t)},p(t)))),(0,a.createElement)(n.TabPanel,{tabs:G,children:e=>{let{Component:t}=e;return(0,a.createElement)(t,null)}}))}const R=e=>{const[t,n]=(0,a.useState)({opportunity:!1,improvement:!1});return(0,a.useEffect)((()=>{n(E(e))}),[e]),(0,a.createElement)("div",{className:"top-query-card",onClick:()=>e.click(e.index)},(0,a.createElement)("div",{className:"top-query-card-header"},e.index+1,". ",e.query),(0,a.createElement)("div",{className:"top-query-card-body"},t.opportunity&&(0,a.createElement)("div",{className:"tag opportunity"},"Opportunity"),t.improvement&&(0,a.createElement)("div",{className:"tag improvement"},"Improvement")),e.clicked&&(0,a.createElement)("div",{className:"top-query-card-footer"},"Your Score:"," ",(0,a.createElement)(I,{style:b(e.scores)},p(e.scores))))};let O=[{name:"Spanish / Español",code:"es"},{name:"French / Français",code:"fr"},{name:"Italian / Italiano",code:"it"},{name:"Dutch / Nederlands",code:"nl"},{name:"Portuguese / Português",code:"pt"},{name:"German / Deutsch",code:"de"},{name:"Polish / Polski",code:"pl"},{name:"English",code:"en"}];O=O.map((e=>({...e,value:e.code,label:e.name})));const z=O,F=e=>{let{className:t="",content:l,extraButtons:o=[]}=e;const{copy:r}=v(),i=[{label:"Copy to Clipboard",icon:(0,a.createElement)("span",{className:"mdi mdi-content-copy"}),onClick:r},{label:"Add to Editor",icon:(0,a.createElement)("span",{className:"mdi mdi-note-plus"}),onClick:_},...o],[s,c]=(0,a.useState)(Array(i.length).fill(!1));function m(e){c((a=>{const t=[...a];return t[e]=!t[e],t}))}return(0,a.createElement)("div",{className:`result-box__container ${t}`},(0,a.createElement)("p",null,l),(0,a.createElement)("div",{className:"result-box__buttons"},i.map(((e,t)=>{return(0,a.createElement)(n.Button,A({key:e.label},e,{onClick:(o=t,function(){m(o),i[o].onClick(l),setTimeout((()=>m(o)),2e3)}),isSmall:!0,showTooltip:!0},s[t]?{disabled:!0,icon:"saved",className:"result-box__button saved"}:{disabled:!1,className:"result-box__button"}));var o}))))},U="meta_description",j="conclusion",H="instruct_me",$=[{label:"Meta Description",value:"meta-description",Component:function(){const e=(0,l.select)("longshot-ai").getPostData("language"),t=(0,l.select)("core/editor").getEditedPostAttribute("title"),[n,o]=(0,a.useState)(e),{headline:s,description:g,result:d}=(0,l.useSelect)((e=>e("longshot-ai").getGeneratorsData(U))),u=e=>{var a,t,n,l;P(U,"result",{error:null!==(a=null!==(t=e?.detail)&&void 0!==t?t:e?.message)&&void 0!==a?a:e.toString(),isLoading:!1}),f(null!==(n=null!==(l=e?.detail)&&void 0!==l?l:e?.message)&&void 0!==n?n:e.toString())},p=e=>{P(U,"result",e)};return(0,a.createElement)("div",{className:"container"},(0,a.createElement)("form",{onSubmit:e=>{e.preventDefault(),P(U,"result",{isLoading:!0}),m.post("longshot_ai_generate_description",{description:g,headline:s,language:n}).done(w(p,u)).fail(w(u,u)).always((()=>{P(U,"result",{isLoading:!1})}))}},(0,a.createElement)(c,{label:"Language",defaultValue:e,options:z,onChange:e=>o(e),required:!0}),(0,a.createElement)(i,{label:(0,a.createElement)("div",{className:"input-label"},(0,a.createElement)("span",null,"Heading"),(0,a.createElement)(r,{showTooltip:!0,label:"Use post title",icon:"insert",isSmall:!0,onClick:()=>P(U,"headline",t)})),value:s,onChange:e=>P(U,"headline",e),required:!0}),(0,a.createElement)(i,{multiline:!0,label:"Description",value:g,onChange:e=>P(U,"description",e),required:!0}),(0,a.createElement)(r,{type:"submit",variant:"primary",isBusy:d.isLoading,disabled:d.isLoading},"Generate")),(0,a.createElement)("div",{className:"results"},d.error?(0,a.createElement)("p",{className:"error"},d.error):d.isLoading?(0,a.createElement)(T,{text:"Generating description"}):d.copies.map(((e,t)=>(0,a.createElement)(F,{content:e.content,key:t,extraButtons:[{label:"Add to post",icon:"media-document",onClick:()=>{y({longshot_ai_meta_description:e.content})}}]})))))},info:"Using this feature, you can automatically generate the meta description for your blog by clicking a button. Present the AI with a headline and description to create the meta description for your blog."},{label:"Write More",value:"write-more",Component:function(){const[e,t]=(0,a.useState)({error:null,isLoading:!1}),n=(e,a)=>{var n,o;t({error:null!==(n=null!==(o=e?.detail)&&void 0!==o?o:e?.message)&&void 0!==n?n:e.toString(),isLoading:!1}),(0,l.dispatch)("core/block-editor").removeBlock(a.clientId)},o=(e,a)=>{var n;if(!e.copies.length)return t({...e,error:null!==(n=e.message)&&void 0!==n?n:e.detail,isLoading:!1}),void(0,l.dispatch)("core/block-editor").removeBlock(a.clientId);(0,l.dispatch)("core/block-editor").updateBlockAttributes(a.clientId,{content:e.copies[0].content}),t({error:null,isLoading:!1});const o=(0,l.select)("core/editor").getEditedPostContent();(0,l.dispatch)("longshot-ai").update_data({last_content:o},"write_more")};return(0,a.createElement)("div",{className:"container"},(0,a.createElement)("form",{onSubmit:function(a){a.preventDefault();const r=N();t({...e,error:null,isLoading:!0});const{text:i,newBlock:s}=k(!0,"<strong>[Writing more...]</strong>"),c=(0,l.select)("longshot-ai").getPostData("language");m.post("longshot_ai_write_more",{language:c,text:i.slice(i.length-2e3),use_cohere:r}).done(w(o,n,s)).fail(w(n,n,s))}},(0,a.createElement)("p",null,(0,a.createElement)("strong",null,"Select text in the editor and click Generate below")),(0,a.createElement)(r,{isBusy:e.isLoading,disabled:e.isLoading,type:"submit",variant:"primary"},"Generate")),(0,a.createElement)("div",{className:"results"},e.error&&(0,a.createElement)("p",{className:"error"},e.error)))},info:"This feature will make the AI generate content based on context of your previous content."},{label:"Instruct Me",value:"instruct-me",Component:function(){const{addDirectly:e,command:t,result:o}=(0,l.useSelect)((e=>e("longshot-ai").getGeneratorsData(H))),s=(e,a)=>{var t,n;a&&(0,l.dispatch)("core/block-editor").removeBlock(a.clientId),f(e.message),P(H,"result",{error:null!==(t=null!==(n=e?.detail)&&void 0!==n?n:e?.message)&&void 0!==t?t:e.toString(),isLoading:!1})},c=(e,a)=>{if(a)return(0,l.dispatch)("core/block-editor").updateBlockAttributes(a.clientId,{content:C(e.copies[0].content)}),P(H,"result",{copies:[],error:null,isLoading:!1});P(H,"result",{...e,isLoading:!1})};return(0,a.createElement)("div",{className:"container"},(0,a.createElement)("form",{onSubmit:function(a){let n;a.preventDefault(),P(H,"result",{isLoading:!0}),e&&(n=_("<strong>[Generating text here...]</strong>")),m.post("longshot_ai_instruct_me",{command:t}).done(w(c,s,n)).fail(w(s,s,n))}},(0,a.createElement)(i,{multiline:!0,onChange:e=>P(H,"command",e),value:t,placeholder:"Enter command",required:!0}),(0,a.createElement)(n.ToggleControl,{label:(0,a.createElement)("div",{className:"input-label"},(0,a.createElement)("span",null,"Add directly to post"),(0,a.createElement)(n.Tooltip,{text:"Text will be added to the current cursor position"},(0,a.createElement)(n.Dashicon,{icon:"info"}))),checked:e,onChange:e=>P(H,"addDirectly",e)}),(0,a.createElement)(r,{isBusy:o.isLoading,disabled:o.isLoading,type:"submit",variant:"primary"},"Generate")),(0,a.createElement)("div",{className:"results"},o.isLoading?(0,a.createElement)(T,{text:"Generating response"}):o.error?(0,a.createElement)("p",{className:"error"},o.error):o?.copies?.map(((e,t)=>(0,a.createElement)(F,{key:t,content:e.content})))))},info:"This feature allows you to give a command about what you want to generate and the AI will generate detailed content based on given instruction."},{label:"Conclusion",value:"conclusion",Component:function(){const e=(0,l.select)("longshot-ai").getPostData("language"),[t,n]=(0,a.useState)(e),{summary:o,result:s}=(0,l.useSelect)((e=>e("longshot-ai").getGeneratorsData(j))),g=e=>{var a,t,n,l;P(j,"result",{copies:[],error:null!==(a=null!==(t=e?.detail)&&void 0!==t?t:e?.message)&&void 0!==a?a:e.toString(),isLoading:!1}),f(null!==(n=null!==(l=e?.detail)&&void 0!==l?l:e?.message)&&void 0!==n?n:e.toString())},d=e=>{P(j,"result",{...e,isLoading:!1})};return(0,a.createElement)("div",{className:"container"},(0,a.createElement)("form",{onSubmit:function(e){e.preventDefault(),P(j,"result",{isLoading:!0}),m.post("longshot_ai_generate_conclusion",{context:o,language:t}).done(w(d,g)).fail(w(g,g))}},(0,a.createElement)(c,{label:"Language",defaultValue:e,options:z,onChange:e=>n(e),required:!0}),(0,a.createElement)(i,{multiline:!0,value:o,onChange:e=>P(j,"summary",e),label:(0,a.createElement)("div",{className:"input-label"},(0,a.createElement)("span",null,"Provide context for better generation"),(0,a.createElement)(r,{showTooltip:!0,label:"Use post content",icon:"insert",isSmall:!0,onClick:()=>P(j,"summary",(0,l.select)("core/block-editor").getBlocks().filter((e=>"core/heading"!==e.name)).map((e=>{switch(e.name){case"core/image":return"";case"core/list":return e.attributes.values.replaceAll("</li><li>","\n").replace("<li>","\n").replace("</li>","\n");case"core/quote":return u(e.attributes.value,!0);default:return e.attributes.content?u(e.attributes.content,!0):""}})).join("\n"))})),required:!0}),(0,a.createElement)(r,{type:"submit",variant:"primary",isBusy:s.isLoading,disabled:s.isLoading},"Generate")),(0,a.createElement)("div",{className:"results"},s.isLoading?(0,a.createElement)(T,{text:"Generating conclusion here"}):s.error?(0,a.createElement)("p",{className:"error"},s.error):s.copies.map(((e,t)=>(0,a.createElement)(F,{content:e.content,key:t})))))},info:"Generate a short conclusion for the post."}];let K=[{name:"Afghanistan",flag:"em-flag-af"},{name:"Albania",flag:"em-flag-al"},{name:"Algeria",flag:"em-flag-dz"},{name:"American Samoa",flag:"em-flag-as"},{name:"Andorra",flag:"em-flag-ad"},{name:"Angola",flag:"em-flag-ao"},{name:"Anguilla",flag:"em-flag-ai"},{name:"Antarctica",flag:"em-flag-aq"},{name:"Antigua and Barbuda",flag:"em-flag-ag"},{name:"Argentina",flag:"em-flag-ar"},{name:"Armenia",flag:"em-flag-am"},{name:"Aruba",flag:"em-flag-aw"},{name:"Australia",flag:"em-flag-au"},{name:"Austria",flag:"em-flag-at"},{name:"Azerbaijan",flag:"em-flag-az"},{name:"Bahamas",flag:"em-flag-bs"},{name:"Bahrain",flag:"em-flag-bh"},{name:"Bangladesh",flag:"em-flag-bd"},{name:"Barbados",flag:"em-flag-bb"},{name:"Belarus",flag:"em-flag-by"},{name:"Belgium",flag:"em-flag-be"},{name:"Belize",flag:"em-flag-bz"},{name:"Benin",flag:"em-flag-bj"},{name:"Bermuda",flag:"em-flag-bm"},{name:"Bhutan",flag:"em-flag-bt"},{name:"Bolivia",flag:"em-flag-bo"},{name:"Bosnia and Herzegovina",flag:"em-flag-ba"},{name:"Botswana",flag:"em-flag-bw"},{name:"Bouvet Island",flag:"em-flag-bv"},{name:"Brazil",flag:"em-flag-br"},{name:"British Indian Ocean Territory",flag:"em-flag-io"},{name:"Brunei Darussalam",flag:"em-flag-bn"},{name:"Bulgaria",flag:"em-flag-bg"},{name:"Burkina Faso",flag:"em-flag-bf"},{name:"Burundi",flag:"em-flag-bi"},{name:"Cambodia",flag:"em-flag-kh"},{name:"Cameroon",flag:"em-flag-cm"},{name:"Canada",flag:"em-flag-ca"},{name:"Cape Verde",flag:"em-flag-cv"},{name:"Cayman Islands",flag:"em-flag-ky"},{name:"Central African Republic",flag:"em-flag-cf"},{name:"Chad",flag:"em-flag-td"},{name:"Chile",flag:"em-flag-cl"},{name:"China",flag:"em-cn"},{name:"Christmas Island",flag:"em-flag-cx"},{name:"Cocos (Keeling) Islands",flag:"em-flag-cc"},{name:"Colombia",flag:"em-flag-co"},{name:"Comoros",flag:"em-flag-km"},{name:"Congo",flag:"em-flag-cg"},{name:"Congo, the Democratic Republic of the",flag:"em-flag-cd"},{name:"Cook Islands",flag:"em-flag-ck"},{name:"Costa Rica",flag:"em-flag-cr"},{name:"Cote D'ivoire",flag:"em-flag-ci"},{name:"Croatia",flag:"em-flag-hr"},{name:"Cuba",flag:"em-flag-cu"},{name:"Cyprus",flag:"em-flag-cy"},{name:"Czech Republic",flag:"em-flag-cz"},{name:"Denmark",flag:"em-flag-dk"},{name:"Djibouti",flag:"em-flag-dj"},{name:"Dominica",flag:"em-flag-dm"},{name:"Dominican Republic",flag:"em-flag-do"},{name:"Ecuador",flag:"em-flag-ec"},{name:"Egypt",flag:"em-flag-eg"},{name:"El Salvador",flag:"em-flag-sv"},{name:"Equatorial Guinea",flag:"em-flag-gq"},{name:"Eritrea",flag:"em-flag-er"},{name:"Estonia",flag:"em-flag-ee"},{name:"Ethiopia",flag:"em-flag-et"},{name:"Falkland Islands (Malvinas)",flag:"em-flag-fk"},{name:"Faroe Islands",flag:"em-flag-fo"},{name:"Fiji",flag:"em-flag-fj"},{name:"Finland",flag:"em-flag-fi"},{name:"France",flag:"em-flag-fr"},{name:"French Guiana",flag:"em-flag-gf"},{name:"French Polynesia",flag:"em-flag-pf"},{name:"French Southern Territories",flag:"em-flag-tf"},{name:"Gabon",flag:"em-flag-ga"},{name:"Gambia",flag:"em-flag-gm"},{name:"Georgia",flag:"em-flag-ge"},{name:"Germany",flag:"em-de"},{name:"Ghana",flag:"em-flag-gh"},{name:"Gibraltar",flag:"em-flag-gi"},{name:"Greece",flag:"em-flag-gr"},{name:"Greenland",flag:"em-flag-gl"},{name:"Grenada",flag:"em-flag-gd"},{name:"Guadeloupe",flag:"em-flag-gp"},{name:"Guam",flag:"em-flag-gu"},{name:"Guatemala",flag:"em-flag-gt"},{name:"Guinea",flag:"em-flag-gn"},{name:"Guinea-Bissau",flag:"em-flag-gw"},{name:"Guyana",flag:"em-flag-gy"},{name:"Haiti",flag:"em-flag-ht"},{name:"Heard Island and Mcdonald Islands",flag:"em-flag-hm"},{name:"Holy See (Vatican City State)",flag:"em-flag-va"},{name:"Honduras",flag:"em-flag-hn"},{name:"Hong Kong",flag:"em-flag-hk"},{name:"Hungary",flag:"em-flag-hu"},{name:"Iceland",flag:"em-flag-is"},{name:"India",flag:"em-flag-in"},{name:"Indonesia",flag:"em-flag-id"},{name:"Iran, Islamic Republic of",flag:"em-flag-ir"},{name:"Iraq",flag:"em-flag-iq"},{name:"Ireland",flag:"em-flag-ie"},{name:"Israel",flag:"em-flag-il"},{name:"Italy",flag:"em-it"},{name:"Jamaica",flag:"em-flag-jm"},{name:"Japan",flag:"em-jp"},{name:"Jordan",flag:"em-flag-jo"},{name:"Kazakhstan",flag:"em-flag-kz"},{name:"Kenya",flag:"em-flag-ke"},{name:"Kiribati",flag:"em-flag-ki"},{name:"Korea, Democratic People's Republic of",flag:"em-flag-kp"},{name:"Korea, Republic of",flag:"em-kr"},{name:"Kuwait",flag:"em-flag-kw"},{name:"Kyrgyzstan",flag:"em-flag-kg"},{name:"Lao People's Democratic Republic",flag:"em-flag-la"},{name:"Latvia",flag:"em-flag-lv"},{name:"Lebanon",flag:"em-flag-lb"},{name:"Lesotho",flag:"em-flag-ls"},{name:"Liberia",flag:"em-flag-lr"},{name:"Libyan Arab Jamahiriya",flag:"em-flag-ly"},{name:"Liechtenstein",flag:"em-flag-li"},{name:"Lithuania",flag:"em-flag-lt"},{name:"Luxembourg",flag:"em-flag-lu"},{name:"Macao",flag:"em-flag-mo"},{name:"Macedonia, the Former Yugosalv Republic of",flag:"em-flag-mk"},{name:"Madagascar",flag:"em-flag-mg"},{name:"Malawi",flag:"em-flag-mw"},{name:"Malaysia",flag:"em-flag-my"},{name:"Maldives",flag:"em-flag-mv"},{name:"Mali",flag:"em-flag-ml"},{name:"Malta",flag:"em-flag-mt"},{name:"Marshall Islands",flag:"em-flag-mh"},{name:"Martinique",flag:"em-flag-mq"},{name:"Mauritania",flag:"em-flag-mr"},{name:"Mauritius",flag:"em-flag-mu"},{name:"Mayotte",flag:"em-flag-yt"},{name:"Mexico",flag:"em-flag-mx"},{name:"Micronesia, Federated States of",flag:"em-flag-fm"},{name:"Moldova, Republic of",flag:"em-flag-md"},{name:"Monaco",flag:"em-flag-mc"},{name:"Mongolia",flag:"em-flag-mn"},{name:"Montserrat",flag:"em-flag-ms"},{name:"Morocco",flag:"em-flag-ma"},{name:"Mozambique",flag:"em-flag-mz"},{name:"Myanmar",flag:"em-flag-mm"},{name:"Namibia",flag:"em-flag-na"},{name:"Nauru",flag:"em-flag-nr"},{name:"Nepal",flag:"em-flag-np"},{name:"Netherlands",flag:"em-flag-nl"},{name:"Netherlands Antilles",flag:""},{name:"New Caledonia",flag:"em-flag-nc"},{name:"New Zealand",flag:"em-flag-nz"},{name:"Nicaragua",flag:"em-flag-ni"},{name:"Niger",flag:"em-flag-ne"},{name:"Nigeria",flag:"em-flag-ng"},{name:"Niue",flag:"em-flag-nu"},{name:"Norfolk Island",flag:"em-flag-nf"},{name:"Northern Mariana Islands",flag:"em-flag-mp"},{name:"Norway",flag:"em-flag-no"},{name:"Oman",flag:"em-flag-om"},{name:"Pakistan",flag:"em-flag-pk"},{name:"Palau",flag:"em-flag-pw"},{name:"Palestinian Territory, Occupied",flag:"em-flag-ps"},{name:"Panama",flag:"em-flag-pa"},{name:"Papua New Guinea",flag:"em-flag-pg"},{name:"Paraguay",flag:"em-flag-py"},{name:"Peru",flag:"em-flag-pe"},{name:"Philippines",flag:"em-flag-ph"},{name:"Pitcairn",flag:"em-flag-pn"},{name:"Poland",flag:"em-flag-pl"},{name:"Portugal",flag:"em-flag-pt"},{name:"Puerto Rico",flag:"em-flag-pr"},{name:"Qatar",flag:"em-flag-qa"},{name:"Reunion",flag:"em-flag-re"},{name:"Romania",flag:"em-flag-ro"},{name:"Russian Federation",flag:"em-flag-ru"},{name:"Rwanda",flag:"em-flag-rw"},{name:"Saint Helena",flag:""},{name:"Saint Kitts and Nevis",flag:""},{name:"Saint Lucia",flag:""},{name:"Saint Pierre and Miquelon",flag:""},{name:"Saint Vincent and the Grenadines",flag:""},{name:"Samoa",flag:"em-flag-ws"},{name:"San Marino",flag:"em-flag-sm"},{name:"Sao Tome and Principe",flag:""},{name:"Saudi Arabia",flag:"em-flag-sa"},{name:"Senegal",flag:"em-flag-sn"},{name:"Serbia and Montenegro",flag:"em-flag-rs"},{name:"Seychelles",flag:"em-flag-sc"},{name:"Sierra Leone",flag:"em-flag-sl"},{name:"Singapore",flag:"em-flag-sg"},{name:"Slovakia",flag:"em-flag-sk"},{name:"Slovenia",flag:"em-flag-si"},{name:"Solomon Islands",flag:"em-flag-sb"},{name:"Somalia",flag:"em-flag-so"},{name:"South Africa",flag:"em-flag-za"},{name:"South Georgia and the South Sandwich Islands",flag:"em-flag-gs"},{name:"Spain",flag:"em-es"},{name:"Sri Lanka",flag:"em-flag-lk"},{name:"Sudan",flag:"em-flag-sd"},{name:"Suriname",flag:"em-flag-sr"},{name:"Svalbard and Jan Mayen",flag:"em-flag-sj"},{name:"Swaziland",flag:"em-flag-sz"},{name:"Sweden",flag:"em-flag-se"},{name:"Switzerland",flag:"em-flag-ch"},{name:"Syrian Arab Republic",flag:"em-flag-sy"},{name:"Taiwan, Province of China",flag:"em-flag-tw"},{name:"Tajikistan",flag:"em-flag-tj"},{name:"Tanzania, United Republic of",flag:"em-flag-tz"},{name:"Thailand",flag:"em-flag-th"},{name:"Timor-Leste",flag:"em-flag-tl"},{name:"Togo",flag:"em-flag-tg"},{name:"Tokelau",flag:"em-flag-tk"},{name:"Tonga",flag:"em-flag-to"},{name:"Trinidad and Tobago",flag:"em-flag-tt"},{name:"Tunisia",flag:"em-flag-tn"},{name:"Turkey",flag:"em-flag-tr"},{name:"Turkmenistan",flag:"em-flag-tm"},{name:"Turks and Caicos Islands",flag:"em-flag-tc"},{name:"Tuvalu",flag:"em-flag-tv"},{name:"Uganda",flag:"em-flag-ug"},{name:"Ukraine",flag:"em-flag-ua"},{name:"United Arab Emirates",flag:"em-flag-ae"},{name:"United Kingdom",flag:"em-gb"},{name:"United States",flag:"em-us"},{name:"United States Minor Outlying Islands",flag:""},{name:"Uruguay",flag:"em-flag-uy"},{name:"Uzbekistan",flag:"em-flag-uz"},{name:"Vanuatu",flag:"em-flag-vu"},{name:"Venezuela",flag:"em-flag-ve"},{name:"Viet Nam",flag:"em-flag-vn"},{name:"Virgin Islands, British",flag:"em-flag-vg"},{name:"Virgin Islands, U.S.",flag:"em-flag-vi"},{name:"Wallis and Futuna",flag:"em-flag-wf"},{name:"Western Sahara",flag:"em-flag-eh"},{name:"Yemen",flag:"em-flag-ye"},{name:"Zambia",flag:"em-flag-zm"},{name:"Zimbabwe",flag:"em-flag-zw"}];K=K.map((e=>({...e,label:e.name,value:e.name})));const W=K;function V(){var e;const t=(0,l.useSelect)((e=>e("core/editor").getCurrentPostAttribute("meta"))),n=(0,l.select)("longshot-ai").getPostData(),[o,s]=(0,a.useState)(null!==(e=t?.longshot_ai_post_topic)&&void 0!==e?e:n.topic),[m,g]=(0,a.useState)(t?.longshot_ai_country||n.country),[d,u]=(0,a.useState)(t?.longshot_ai_language||n.language),[f,p]=(0,a.useState)("save"),[h,b]=(0,a.useState)(!1);function E(e){return function(a){switch(b(!0),e){case"topic":s(a);break;case"country":g(a);break;case"language":u(a)}}}return(0,a.useEffect)((()=>{const e={};t.longshot_ai_post_topic&&(e.topic=t.longshot_ai_post_topic),t.longshot_ai_country&&(e.country=t.longshot_ai_country),t.longshot_ai_language&&(e.language=t.longshot_ai_language),Object.keys(e).length&&(0,l.dispatch)("longshot-ai").update_postData(e)}),[t]),(0,a.createElement)("form",{className:"wrap lsai",onSubmit:function(e){p("saving"),e.preventDefault(),(0,l.dispatch)("core/editor").editPost({meta:{longshot_ai_post_topic:o,longshot_ai_country:m,longshot_ai_language:d}}).then((()=>{(0,l.dispatch)("core/editor").savePost()})).then((()=>{p("saved"),b(!1)}))}},(0,a.createElement)(i,{label:"Post Topic",value:o,onChange:E("topic")}),(0,a.createElement)(c,{label:"Country",value:m,onChange:E("country"),options:W}),(0,a.createElement)(c,{label:"Language",value:d,onChange:E("language"),options:z}),(0,a.createElement)(r,{variant:"primary",type:"submit",isBusy:"saving"===f,disabled:!h},f.toUpperCase()))}function Y(){const{plugins_url:e}=window.longshot_ai_ajax_object;return(0,a.createElement)("div",{id:"lsai_sidebar_opener_button"},(0,a.createElement)("img",{src:`${e}/assets/longshot-mini.png`,alt:""}))}function J(e){let{fill:t="#fff",height:n="inherit",width:l="inherit"}=e;return(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1600 1326.6667",height:n,width:l,fill:t,version:"1.1"},(0,a.createElement)("defs",null,(0,a.createElement)("linearGradient",{id:"linearGradient30",gradientTransform:"matrix(0,955.74786,955.74786,0,600,19.62607)",gradientUnits:"userSpaceOnUse",y2:"0",x2:"1",y1:"0",x1:"0"},(0,a.createElement)("stop",{id:"stop24",offset:"0",style:{stopOpacity:1,stopColor:"#b501f2"}}),(0,a.createElement)("stop",{id:"stop26",offset:"0.80433699",style:{stopOpacity:1,stopColor:"#6200ea"}}),(0,a.createElement)("stop",{id:"stop28",offset:"1",style:{stopOpacity:1,stopColor:"#6200ea"}}))),(0,a.createElement)("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,1326.6667)",id:"g10"},(0,a.createElement)("g",{id:"g12"},(0,a.createElement)("g",{id:"g14"},(0,a.createElement)("g",{id:"g20"},(0,a.createElement)("g",{id:"g22"},(0,a.createElement)("path",{id:"path32",d:"M 914.743,880.142 C 914.54,879.979 893.957,863.484 871.044,839.6 v 0 l -74.506,-10.956 c -0.812,-0.391 -1.566,-0.756 -2.378,-1.146 v 0 L 735.207,772.38 c -0.758,-0.716 -1.235,-1.66 -1.358,-2.669 v 0 c -0.058,-0.435 -0.048,-0.861 0.033,-1.306 v 0 c 0.256,-1.469 1.228,-2.703 2.587,-3.294 v 0 l 70.021,-30.302 c -1.635,-9.791 -1.283,-18.979 0.673,-27.566 v 0 L 714.651,635.664 H 248.545 c -4.65,0 -9.247,-1.048 -13.437,-3.068 v 0 l -95.762,-46.013 c -13.26,11.239 -30.39,18.049 -49.134,18.049 v 0 c -42.021,0 -76.083,-34.063 -76.083,-76.08 v 0 c 0,-42.018 34.062,-76.082 76.083,-76.082 v 0 c 42.014,0 76.076,34.064 76.076,76.082 v 0 c 0,0.703 -0.085,1.384 -0.106,2.084 v 0 l 89.428,42.965 h 469.645 c 6.873,0 13.555,2.287 18.984,6.488 v 0 l 102.588,79.379 c 8.22,-2.953 21.342,-5.98 39.535,-4.949 v 0 l 17.055,-74.58 c 0.332,-1.454 1.374,-2.633 2.769,-3.148 v 0 c 1.389,-0.524 2.951,-0.294 4.153,0.588 v 0 l 64.955,47.902 c 0.545,0.77 1.058,1.483 1.604,2.254 v 0 l 22.159,71.066 c 17.541,11.692 35.553,25.598 53.569,41.342 v 0 c 103.716,90.659 127.329,168.764 132.176,207.248 v 0 c 1.6,12.667 0.936,19.844 0.915,20.147 v 0 c -0.171,1.78 -1.401,3.277 -3.111,3.801 v 0 c -1.502,0.456 -14.664,4.235 -37.573,4.235 v 0 c -44.575,0 -126.046,-14.308 -230.29,-95.232 m 65.5,-105.337 c -18.237,5.188 -31.519,22.3 -32.026,41.254 v 0 c -0.807,30.415 27.708,52.552 56.975,44.227 v 0 c 18.237,-5.191 31.518,-22.301 32.021,-41.254 v 0 c 0.696,-26.031 -20.091,-45.995 -44.44,-45.995 v 0 c -4.104,0 -8.309,0.567 -12.53,1.768 m -596.358,45.52 H 353.302 248.545 c -17.136,0 -31.032,-13.896 -31.032,-31.031 v 0 c 0,-17.136 13.896,-31.032 31.032,-31.032 v 0 h 104.757 30.583 210.273 c 17.135,0 31.032,13.896 31.032,31.032 v 0 c 0,17.135 -13.897,31.031 -31.032,31.031 v 0 z M 859.205,451.003 H 830.622 248.545 c -17.136,0 -31.032,-13.897 -31.032,-31.032 v 0 c 0,-17.136 13.896,-31.032 31.032,-31.032 v 0 h 582.077 28.583 153.267 c 17.135,0 31.032,13.896 31.032,31.032 v 0 c 0,17.135 -13.897,31.032 -31.032,31.032 v 0 z M 248.545,266.341 c -17.136,0 -31.032,-13.897 -31.032,-31.032 v 0 c 0,-17.136 13.896,-31.032 31.032,-31.032 v 0 h 763.927 c 17.135,0 31.032,13.896 31.032,31.032 v 0 c 0,17.135 -13.897,31.032 -31.032,31.032 v 0 z m 0,-184.652 c -17.136,0 -31.032,-13.896 -31.032,-31.032 v 0 c 0,-17.134 13.896,-31.031 31.032,-31.031 v 0 h 345.613 c 17.135,0 31.032,13.897 31.032,31.031 v 0 c 0,17.136 -13.897,31.032 -31.032,31.032 v 0 z"})))))))}const Z=[{name:"keyword",title:"Keywords",icon:"",Component:function(){const e=(0,l.useSelect)((e=>e("core/editor").getEditedPostContent())),[t,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)([]),c=(0,l.useSelect)((e=>e("longshot-ai").getKeywords())),m=(0,l.useSelect)((e=>e("longshot-ai").getSeoData()));return(0,a.useEffect)((()=>{const a=c.map((a=>{const t=new RegExp(a[0],"gi"),n=e.match(t);return n?n.length:0}));s(a)}),[e,c]),m.isLoading?(0,a.createElement)(T,{text:"Loading Popular Keywords"}):m.error||!c.length?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",{className:"error"},"Error: ",null!==(g=m.error)&&void 0!==g?g:"Unknown error occurred while fetching keywords"),(0,a.createElement)(r,{variant:"primary",isBusy:m.isLoading,onClick:D},"Retry")):(0,a.createElement)("div",{className:"wrap keywords-container"},(t?c:c.slice(0,12)).map(((e,t)=>(0,a.createElement)(o,{key:t,keyword:e,matches:i[t]}))),c.length>0&&(0,a.createElement)(r,{className:"toggler",onClick:()=>n(!t)},(0,a.createElement)("span",{className:`dashicons dashicons-arrow-${t?"up":"down"}-alt2`}),"See ",t?"Less":"More"));var g}},{name:"generators",title:"AI Generators",icon:"",Component:function(){const{selected:e}=(0,l.useSelect)((e=>e("longshot-ai").getGeneratorsData())),t=$.find((a=>a.value===e))?.Component;return(0,a.createElement)("section",{className:"generators"},(0,a.createElement)(c,{label:"Feature",value:e,options:$,hideLabelFromVision:!0,onChange:e=>(e=>{(0,l.dispatch)("longshot-ai").select_generator(e)})(e)}),(0,a.createElement)("p",{className:"info"},$.find((a=>a.value===e)).info),t&&(0,a.createElement)(t,null))}},{name:"semantic-seo",title:"Semantic SEO",icon:"",Component:function(){const[e,t]=(0,a.useState)({opportunity:0,improvement:0}),[o,r]=(0,a.useState)(!1),[i,c]=(0,a.useState)(-1),m=(0,l.useSelect)((e=>e("longshot-ai").getData("semantic_score")));function g(e){c(i===e?-1:e)}if((0,a.useEffect)((()=>{m.isLoading&&Promise.all([L("semantic"),L("serp")])}),[]),(0,a.useEffect)((()=>{if(!m?.scores)return;const e={opportunity:0,improvement:0};m.scores[0].forEach((a=>{const t=E(a);e.opportunity+=t.opportunity?1:0,e.improvement+=t.improvement?1:0})),t(e)}),[m]),o)return(0,a.createElement)(n.Modal,{title:"Semantic SEO Score",className:"lsai lsai_expanded_semantic_seo",onRequestClose:()=>r(!1)},(0,a.createElement)(q,null));let d=0;return m&&m.scores&&(d=m.scores[0].reduce(((e,a)=>e+a.scores),0)/m.scores[0].length),m.error?(0,a.createElement)("div",null,m.error,(0,a.createElement)(n.Button,{variant:"primary",disabled:m.isLoading,onClick:()=>{L("semantic");const e=(0,l.select)("longshot-ai").getData("serp_score");e.isLoading&&!e.error||L("serp")}},"Try Again")):(0,a.createElement)("div",{className:"wrap seo-wrapper"},m.isLoading?(0,a.createElement)(T,{text:"Loading scores"}):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"wrap aggregate-score"},(0,a.createElement)("span",null,"Aggregate Score",(0,a.createElement)(n.Button,{className:"extra recalculate-button",variant:"link",label:"Recalculate",onClick:()=>L("semantic"),icon:(0,a.createElement)(s,{icon:"refresh"})})),(0,a.createElement)("div",{className:"aggregate-score-wrapper"},(0,a.createElement)(I,{variant:d>6?"green":d>4?"yellow":"red",style:{backgroundColor:h(d).bg,color:h(d).fg}},p(d)))),(0,a.createElement)("div",{className:"wrap queries"},(0,a.createElement)("p",null,(0,a.createElement)("span",{className:"query-heading"},"Top Queries"),(0,a.createElement)(n.Button,{className:"extra expand-button",variant:"link",label:"Expand",onClick:()=>r(!0),icon:(0,a.createElement)(s,{icon:"arrow-expand"})})),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"query-pill query-pill-yellow"},e.opportunity>0&&`${e.opportunity} Opportunities`),(0,a.createElement)("span",{className:"query-pill query-pill-red"},e.improvement>0&&`${e.improvement} Improvements`)),(0,a.createElement)("div",{className:"query-container"},m?.scores.length>0&&m?.scores[0].map(((e,t)=>(0,a.createElement)(R,A({key:t,index:t,clicked:t===i,click:g},e))))))))}}];function Q(e){let{setState:t,...o}=e;const c=(0,l.useSelect)((e=>e("core/editor").getCurrentPostAttribute("meta").longshot_ai_meta_description)),[g,d]=(0,a.useState)(c),[u,p]=(0,a.useState)(0),h=(0,l.useSelect)((e=>e("core/editor").getEditedPostAttribute("title"))),b=(0,l.useSelect)((e=>e("longshot-ai").getPostData("language"))),E=(0,l.useSelect)((e=>e("core/editor").getEditedPostAttribute("excerpt")||e("core/editor").getEditedPostAttribute("content").slice(0,200))),v=e=>{e.preventDefault(),y({longshot_ai_meta_description:g})},_=e=>{var a,n;t((a=>{var t,n;return{...a,state:"error",errorMessage:null!==(t=null!==(n=e?.detail)&&void 0!==n?n:e?.message)&&void 0!==t?t:e.toString()}})),f(null!==(a=null!==(n=e?.detail)&&void 0!==n?n:e?.message)&&void 0!==a?a:e.toString())},k=e=>{t((a=>({...a,state:"fetched",results:e})))},S=e=>{e.preventDefault(),t((e=>({...e,state:"loading",oldDescription:g}))),m.post("longshot_ai_generate_description",{description:E,headline:h,language:b}).done(w(k,_)).fail(w(_,_))},C=e=>{e.preventDefault(),t((e=>({...e,state:"initial",description:e.oldDescription})))},N=e=>{e.preventDefault(),d(o.results.copies[u].content),t((e=>({...e,state:"initial",description:o.results.copies[u].content}))),y({longshot_ai_meta_description:o.results.copies[u].content})};switch(o.state){case"initial":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)(i,{multiline:!0,rows:7,value:g,onChange:e=>d(e)})),(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)(r,{onClick:S,variant:"primary"},"Generate description"),g!==c&&(0,a.createElement)(r,{variant:"primary",onClick:v},"Update")));case"loading":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)(T,{showLoader:!1})),(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)(r,{variant:"primary",isDestructive:!0,onClick:C,isSmall:!0,className:"lsai_cancel"},"Cancel")));case"fetched":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)("div",{className:"description-card"},(0,a.createElement)("p",null,o.results.copies[u].content),(0,a.createElement)("div",{className:"buttons"},(0,a.createElement)(r,{variant:"primary",onClick:N,isSmall:!0},"Select"),(0,a.createElement)(r,{variant:"primary",isDestructive:!0,onClick:C,isSmall:!0},"Cancel")))),(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)(r,{onClick:()=>p((e=>e-1)),disabled:0===u,children:(0,a.createElement)("span",null,(0,a.createElement)(s,{icon:"keyboard-backspace"})," ","Previous")}),(0,a.createElement)(r,{onClick:()=>p((e=>e+1)),disabled:u==o?.results?.copies.length-1,children:(0,a.createElement)("span",null,"Next ",(0,a.createElement)(s,{icon:"arrow-right"}))})));case"error":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)("p",null,"Error: ",o.errorMessage)),(0,a.createElement)(n.PanelRow,{className:"lsai_row"},(0,a.createElement)(r,{variant:"primary",onClick:C,isSmall:!0},"Cancel")))}return(0,a.createElement)(a.Fragment,null)}const X={isLoading:!0,error:null},ee={copies:[],...X,isLoading:!1},ae={all_seo_data:{similar_topics:[],google_questions_list:[],related_keywords:[],extracted_keywords:[],top_subheadlines:[],fact_sheets:[],...X},notifications:[],postData:{language:"en",country:"United States"},semantic_score:{...X},serp_score:{...X},write_more:{last_content:"",subsequent_runs:0,error_count:0},generators:{selected:"meta-description",meta_description:{heading:"",description:"",result:ee},write_more:{result:ee},instruct_me:{command:"",addDirectly:!1,result:ee},conclusion:{summary:"",result:ee}}},te={update_postData:e=>({type:"UPDATE_POST_DATA",payload:e}),reset_postData:()=>({type:"UPDATE_POST_DATA",payload:ae.postData}),update_seo_data:e=>({type:"UPDATE_SEO_DATA",payload:e}),update_data:(e,a)=>({type:"UPDATE_DATA",payload:e,key:a}),add_notification(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";const n=(new Date).getTime().toString()+1e3*Number(Math.random().toFixed(3));return{type:"ADD_NOTIFICATION",payload:{message:e,detail:a,type:t,id:Number(n)}}},delete_notification:e=>({type:"DELETE_NOTIFICATION",id:e}),update_generators_data:(e,a,t)=>({type:"UPDATE_GENERATORS_DATA",name:e,payload:{key:a,updated_data:t}}),select_generator:e=>({type:"UPDATE_SELECTED_GENERATOR",payload:e})},ne=(0,l.createReduxStore)("longshot-ai",{reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_SEO_DATA":return{...e,all_seo_data:{...e.all_seo_data,...a.payload}};case"UPDATE_POST_DATA":return{...e,postData:{...e.postData,...a.payload}};case"UPDATE_DATA":return{...e,[a.key]:{...e[a.key],...a.payload}};case"ADD_NOTIFICATION":return{...e,notifications:[...e.notifications,a.payload]};case"DELETE_NOTIFICATION":return{...e,notifications:e.notifications.filter((e=>e.id!==a.id))};case"UPDATE_GENERATORS_DATA":let{name:t,payload:{key:n,updated_data:l}}=a;return"result"===n&&(l={...e.generators[t].result,...l}),{...e,generators:{...e.generators,[t]:{...e.generators[t],[n]:l}}};case"UPDATE_SELECTED_GENERATOR":return{...e,generators:{...e.generators,selected:a.payload}}}return e},actions:te,selectors:{getSeoData:(e,a)=>a?e.all_seo_data[a]:e.all_seo_data,getKeywords:e=>e.all_seo_data.extracted_keywords,getPostData:(e,a)=>a?e.postData[a]:e.postData,getData:(e,a,t)=>t&&a&&e[a]?e[a][t]:a?e[a]:e,getGeneratorsData:(e,a,t)=>a&&t?e.generators[a][t]:a?e.generators[a]:e.generators}});(0,l.register)(ne),(0,e.registerPlugin)("longshot-ai-generate-headline",{render:function(){return(0,a.createElement)(t.PluginBlockSettingsMenuItem,{icon:(0,a.createElement)("img",{src:window.longshot_ai_ajax_object.plugins_url+"/assets/longshot-mini.png",alt:"",style:{width:24}}),label:"Generate Headline",allowedBlocks:["core/paragraph"],onClick:()=>{const{text:e,start:a}=k(),t=(0,g.createBlock)("core/heading",{content:"<strong>[Generating headline...]</strong>"}),n=(0,l.select)("core/block-editor").getBlockIndex(a.clientId);function o(){(0,l.dispatch)("core/block-editor").removeBlock(t.clientId)}(0,l.dispatch)("core/block-editor").insertBlock(t,n),m.post("longshot_ai_generate_headline",{description:e}).done(w((function(e){(0,l.dispatch)("core/block-editor").updateBlockAttributes(t.clientId,{content:e.copies[0].content})}),o)).fail(w(o,o))}})}}),(0,e.registerPlugin)("longshot-ai-write-more",{render:function(){return(0,a.createElement)(t.PluginBlockSettingsMenuItem,{icon:(0,a.createElement)("img",{src:window.longshot_ai_ajax_object.plugins_url+"/assets/longshot-mini.png",alt:"",style:{width:24}}),label:"Write More",allowedBlocks:["core/paragraph"],onClick:()=>{const e=(0,l.select)("longshot-ai").getPostData("language"),{end:a,text:t}=k(),n=(0,l.select)("core/block-editor").getSelectionEnd(),o=S((0,l.select)("core/block-editor").getBlock(n.clientId).attributes.content);(0,l.dispatch)("core/block-editor").updateBlockAttributes(a.clientId,{content:C(`${o.slice(0,n.offset)} <strong>[Writing more...]</strong> ${o.slice(n.offset)}`)});const r=function(e){var t,n;console.log(e),(0,l.dispatch)("core/block-editor").updateBlockAttributes(a.clientId,{content:C(o)}),f(null!==(t=null!==(n=e?.message)&&void 0!==n?n:e?.detail)&&void 0!==t?t:"Error writing more")},i=N();m.post("longshot_ai_write_more",{text:t,language:e,use_cohere:i}).done(w((function(e){if(!e.copies.length)return void f(e.message);const t=e.copies[0].content.replace(/\n/g,"<br>");(0,l.dispatch)("core/block-editor").updateBlockAttributes(a.clientId,{content:C(o.slice(0,n.offset)+t+o.slice(n.offset))})}),r)).fail(w(r,r))}})}});const le=function(e){let{message:t,detail:n,type:o,id:r}=e;return(0,a.createElement)("div",{className:`notification notification-${o}`},(0,a.createElement)("div",{className:"notification-message"},t),(0,a.createElement)("div",{className:"notification-detail"},n),(0,a.createElement)("div",{className:"notification-button",onClick:()=>function(e){(0,l.dispatch)("longshot-ai").delete_notification(e)}(r)},(0,a.createElement)(s,{icon:"close"})))},oe=window.wp.i18n;(0,e.registerPlugin)("longshot-ai-sidebar",{render:function(){const e=(0,l.useSelect)((e=>e("longshot-ai").getPostData()));return(0,l.useSelect)((e=>e("core/editor").getEditedPostContent())),(0,a.useEffect)(D,[e]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(t.PluginSidebarMoreMenuItem,{target:"lsai",icon:(0,a.createElement)(J,{width:"20px"})},"Longshot AI"),(0,a.createElement)(t.PluginSidebar,{className:"lsai",name:"lsai",title:"Longshot AI",icon:Y},e.topic&&e.topic.length?(0,a.createElement)(n.TabPanel,{tabs:Z,children:e=>{let{Component:t}=e;return(0,a.createElement)(t,null)}}):(0,a.createElement)(V,null)))}}),(0,e.registerPlugin)("longshot-ai-document-setting",{render:function(){return(0,a.createElement)(t.PluginDocumentSettingPanel,{name:"longshot-ai",title:"Longshot AI"},(0,a.createElement)(V,null))}}),(0,e.registerPlugin)("longshot-ai-pre-publish-panel",{render:function(){const e=(0,l.useSelect)((e=>e("core/editor").getCurrentPostAttribute("meta").longshot_ai_meta_description)),[o,r]=(0,a.useState)({description:e,state:"initial"});return(0,a.createElement)(t.PluginPrePublishPanel,null,(0,a.createElement)(n.Panel,{className:"lsai pre_publish"},(0,a.createElement)(n.PanelBody,{title:"Meta Description"},(0,a.createElement)(Q,A({},o,{setState:r})))))}}),(0,e.registerPlugin)("snackbar-wrapper",{render:function(){const e=(0,l.useSelect)((e=>e("longshot-ai").getData("notifications")));return(0,a.useEffect)((()=>{const e=document.querySelector("#messages-container");e&&(e.parentElement.style.display="block")}),[e]),e.length?(0,a.createElement)("div",{className:"lsai",id:"messages-container"},e.map((e=>(0,a.createElement)(le,A({key:e.id},e))))):null}}),document.addEventListener("DOMContentLoaded",(function(){if(""===window.longshot_ai_ajax_object.show_feedback)return;const e=document.createElement("div");e.id="longshot-feedback-popup",e.className="longshot-feedback-popup",e.classList.add("hidden"),e.innerHTML=`\n        <h3>${(0,oe.__)("We love to hear from you","longshot-ai")}</h3>\n        <p>${(0,oe.__)("How is your experience with Longshot AI WordPress plugin","longshot-ai")}</p>\n\n        <form id="longshot-ai-feedback-form">\n            <div class="rating-row">\n                 <label title="Very Bad">\n                    <input type="radio" name="feedback" value="1">\n                    <span class="mdi mdi-emoticon-angry"></span>\n                </label>\n                 <label title="Bad">\n                    <input type="radio" name="feedback" value="2">\n                    <span class="mdi mdi-emoticon-sad"></span>\n                </label>\n                <label title="No comments">\n                    <input type="radio" name="feedback" value="3">\n                    <span class="mdi mdi-emoticon-neutral"></span>\n                </label>\n                <label title="Good">\n                    <input type="radio" name="feedback" value="4">\n                    <span class="mdi mdi-emoticon-happy"></span>\n                </label>\n                <label title="Excellent">\n                    <input type="radio" name="feedback" value="5">\n                    <span class="mdi mdi-emoticon-excited"></span>\n                </label>\n            </div>\n            <p id="longshot-help-message"></p>\n           <textarea name="feedback_text" rows="5" placeholder="${(0,oe.__)("Please, tell us what you think about Longshot Ai WordPress plugin","longshot-ai")}"></textarea>\n           <div class="buttons">\n                <button type="submit" data-submit="skip">Don't ask again</button>\n                <button type="submit" data-submit="remind">Remind me later</button>\n                <button type="submit" data-submit="submit">Submit</button>\n           </div>\n        </form>\n    `,document.body.appendChild(e);const a=document.getElementById("longshot-ai-feedback-form"),t=document.querySelector("#longshot-ai-feedback-form .rating-row"),n=document.querySelector("#longshot-ai-feedback-form #longshot-help-message"),l=document.querySelector("#longshot-ai-feedback-form textarea");t.addEventListener("click",(e=>{if(!e.target||e.target.matches('input[type="radio"]'))switch(e.target.value){case"1":case"2":n.innerHTML=(0,oe.__)("Sorry, we can definitely see how frustrating you would be. Please, share your experience for us to improve.","longshot-ai"),l.value="",a.classList.add("started");break;case"3":n.innerHTML=(0,oe.__)("Please, tell us what you think about Longshot Ai WordPress plugin","longshot-ai"),l.value="",a.classList.add("started");break;case"4":case"5":n.innerHTML=(0,oe.__)("That's great, to hear you are satisfied with the plugin.","longshot-ai"),l.value="",a.classList.add("started")}})),a.addEventListener("submit",(a=>{a.preventDefault();const n=a.submitter,o={feedback:l.value,rating:t.querySelector('input[type="radio"]:checked')?.value,type:n.dataset.submit};return e.classList.add("loading"),m.post("longshot_ai_handle_feedback",o).done(console.debug).fail((e=>{console.error(e),console.error((0,oe.__)("Something went wrong. Please, try again later.","longshot-ai"))})).always((()=>{let a=(0,oe.__)("Thank you for your feedback!","longshot-ai");"skip"===n.dataset.submit?a=(0,oe.__)("We will not ask you again.","longshot-ai"):"remind"===n.dataset.submit?a=(0,oe.__)("We will remind you later.","longshot-ai"):"submit"===n.dataset.submit&&(a="1"===o.rating||"2"===o.rating?(0,oe.__)("We will see how we can improve.","longshot-ai"):(0,oe.__)("Thank you for your feedback!","longshot-ai")),e.classList.remove("loading"),e.innerHTML=`<h3>${a}</h3>`,setTimeout((()=>{document.body.removeChild(e),window.longshot_ai_ajax_object.show_feedback=""}),3e3)}))})),setTimeout((()=>{e.classList.remove("hidden")}),5e3)}))})();